<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <!-- For Mobile Devices -->
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <!-- Loading Lato Font -->
 <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
 <!-- Loading Font Awesome -->
 <link rel="stylesheet" href="font-awesome-4.3.0/css/font-awesome.min.css">
 <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
 <meta name="generator" content="Doxygen 1.8.9.1"/>
 <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
 <title>Reading a binary InterOp file</title>
 <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
 <script type="text/javascript" src="dynsections.js"></script>
 <link href="doxygen.css" rel="stylesheet" type="text/css" />
 <link href="customdoxygen.css" rel="stylesheet" type="text/css" />
 <link rel="stylesheet" href="bootstrap3/css/bootstrap.min.css">
 <link href="bootstrap3/css/sticky-footer-navbar.css" rel="stylesheet">
 <script src="bootstrap3/js/bootstrap.min.js"></script>
 <script type="text/javascript" src="doxy-boot.js"></script>
</head>
<body screen_capture_injected="true">
<nav class="navbar navbar-inverse" role="navigation">
 <div class="container">
  <div class="navbar-header">
   <a class="navbar-brand" href="https://www.illumina.com/"><img style='margin-top: -8px !important;height: 40px !important;' src='ILLUMINA_LOGO_RGB_new_200_45.png' /></a>
   <a class="navbar-brand">InterOp <span style="font-size: 10pt">v1.0.1-29-g1b4f374</span>  </a>
  </div>
  <div class="collapse navbar-collapse">
   <!-- Left -->
   <ul class="nav navbar-nav adjust-right">
    <li><a href="https://github.com/Illumina/interop">Code</a></li>
    <li><a href="https://github.com/Illumina/interop/issues">Issues</a></li>
    <li><a href="https://github.com/Illumina/interop/releases/latest">Download</a></li>
   </ul>
  </div><!--/.nav-collapse -->
 </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
 <div class="content" id="content">
  <div class="container">
   <div class="row">
    <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
     <div style="margin-bottom: 15px;">
      <!-- end header part --><!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Documentation</span></a></li>
      <li><a href="modules.html"><span>InterOp</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="examples.html">Examples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Reading a binary InterOp file </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Reading a binary Interop file is really just two lines of code, but all sorts of unexpected situations may arise. This example shows you how to write bullet proof code to read an Illumina InterOp file.</p>
<h2>C++ </h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;interop/model/metric_sets/tile_metric_set.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;interop/io/metric_file_stream.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceillumina_1_1interop_1_1model_1_1metrics.html">illumina::interop::model::metrics</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceillumina_1_1interop_1_1io.html">illumina::interop::io</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> check_args(<span class="keywordtype">int</span> argc);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keywordflow">if</span>((ret = check_args(argc)) != 0) <span class="keywordflow">return</span> ret;</div>
<div class="line">    <a class="code" href="classillumina_1_1interop_1_1model_1_1metrics_1_1tile__metrics.html">tile_metrics</a> tile_metric_set;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">        <a class="code" href="group__file__io.html#ga063f4878f7322e06e3922b3e9b230e10">read_interop</a>(argv[1], tile_metric_set);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span>(<span class="keyword">const</span> <a class="code" href="structillumina_1_1interop_1_1io_1_1incomplete__file__exception.html">incomplete_file_exception</a>&amp;){}<span class="comment">// Ignore incomplete files</span></div>
<div class="line">    <span class="keywordflow">catch</span>(<span class="keyword">const</span> <a class="code" href="structillumina_1_1interop_1_1io_1_1bad__format__exception.html">bad_format_exception</a>&amp; ex) <span class="comment">// Something catastrophic happened to the file</span></div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;InterOp did not have the expected format: &quot;</span> &lt;&lt; ex.what() &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span>(<span class="keyword">const</span> <a class="code" href="structillumina_1_1interop_1_1io_1_1file__not__found__exception.html">file_not_found_exception</a>&amp; ex)</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Count not find InterOp file: &quot;</span> &lt;&lt; ex.what() &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Tile metric set contains &quot;</span> &lt;&lt; tile_metric_set.<a class="code" href="classillumina_1_1interop_1_1model_1_1metric__base_1_1metric__set.html#aad951c0991145f122895d909906b9c32">metrics</a>().size() &lt;&lt; <span class="stringliteral">&quot; metrics&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --> <h2>C# </h2>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>Example1</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> Main(<span class="keywordtype">string</span>[] args)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (args.Length != 1)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (args.Length &lt; 1)</div>
<div class="line">                Console.WriteLine (<span class="stringliteral">&quot;No run folder&quot;</span>);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                Console.WriteLine (<span class="stringliteral">&quot;Too many arguments&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        tile_metrics tile_metric_set = <span class="keyword">new</span> tile_metrics ();</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            c_csharp_interop.read_interop (args [0], tile_metric_set);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span>(incomplete_file_exception){}</div>
<div class="line">        <span class="keywordflow">catch</span>(file_not_found_exception ex)</div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;File not found: &quot;</span>+args[0]);</div>
<div class="line">            Console.WriteLine (ex);</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span>(bad_format_exception ex)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine (ex);</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">        Console.Write (<span class="stringliteral">&quot;Tile metric set contains {0} metrics&quot;</span>, tile_metric_set.size());</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/>
</body>
</html>
